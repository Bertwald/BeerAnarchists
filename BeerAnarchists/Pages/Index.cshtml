@page
@using Microsoft.AspNetCore.Identity;
@inject SignInManager<Forum.Data.Models.ForumUser> SignInManager
@inject UserManager<Forum.Data.Models.ForumUser> UserManager
@inject RoleManager<IdentityRole> RoleManager
@model IndexModel
@{
    ViewData["Title"] = "Beer Anarchist Forum Index";
    var user = await UserManager.GetUserAsync(User);
}

@if(SignInManager.IsSignedIn(User) && User.IsInRole("Admin")) {
    <span id="postBtn">
            <a asp-page="/SubForum/NewSubforum" asp-route-userId=@user?.Id class="btn-secondary">
        [ADMIN] Create new Subforum
      </a>
    </span>
}
<div class="text-center">
    <h1 class="display-4">Welcome to the Beer-Anarchists Forum</h1>
    <table class="table table striped table-dark table-hover" id="indexTable">
        @foreach (var subFora in Model.SubForums) {
            <tr>
              <td>
                <a asp-page="./SubForum/SubForum" asp-route-id="@subFora.Id">
                  @subFora.Title
                </a>
              </td>
              <td>
                @subFora.Description
              </td>
            </tr>
        }

    </table>
</div>
