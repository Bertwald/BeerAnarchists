@page
@using Microsoft.AspNetCore.Identity;
@inject SignInManager<Forum.Data.Models.ForumUser> SignInManager
@inject UserManager<Forum.Data.Models.ForumUser> UserManager
@inject RoleManager<IdentityRole> RoleManager
@model IndexModel
@{
    ViewData["Title"] = "Forum Index";
    var user = await UserManager.GetUserAsync(User);
}

@if(SignInManager.IsSignedIn(User) && User.IsInRole("Admin")) {
    <span id="postBtn">
            <a asp-page="/SubForum/NewSubforum" asp-route-userId=@user?.Id class="btn-secondary btn-lg" style="background-color:#4b0076; color:gold">
        [ADMIN] Create new Subforum
      </a>
    </span>
}
<div class="text-center">
    <h1 class="display-4">Welcome to the Beer-Anarchists Forum</h1>
    <table class="table table striped table-dark table-hover" id="indexTable">
        @foreach (var subFora in Model.SubForums) {
          <tr>
            <td>

          <div class="row text-center tablerow">
            <div class="subforum-container">
              <div class="suforum-image" style="background-image: url(@subFora.ImageUrl)"></div>
                <a asp-page="./SubForum/SubForum" asp-route-id="@subFora.Id">
                  @subFora.Title
                </a>
            </div>
          </div>
            </td>
            <td>
                @subFora.Description
            </td>
            </tr>
        }
    </table>
</div>
